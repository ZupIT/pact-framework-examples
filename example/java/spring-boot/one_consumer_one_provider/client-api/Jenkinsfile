#!groovy
pipeline {
    agent any
    environment {
        WORKSPACE="${WORKSPACE}/example/java/spring-boot/one_consumer_one_provider/client-api"
        BRANCH_NAME=env.GIT_BRANCH.replace("origin/", "")
    }
    dir($WORKSPACE) {
        stages {
            stage('Build artifact') {
                dir($WORKSPACE) {
                    sh "chmod +x mvnw"
                    sh "./mvnw clean verify"
                }                
            }
            stage('Publish to Pact') {
                input {
                    message "Publish Pact to Broker?"
                    ok "Yes, for sure ."
                }
                steps {
                    echo "Publicando Pact no Broker"
                }
            }

        }
    }
}